(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,t,n){e.exports={app:"App_app__3qs5H",app__title:"App_app__title__3d_lf"}},200:function(e,t,n){e.exports={books:"Books_books__bRDdH"}},201:function(e,t,n){e.exports={counter:"Counter_counter__1MgsA"}},202:function(e,t,n){e.exports={reset:"Reset_reset__16IeP"}},203:function(e,t,n){e.exports={loader:"Spinner_loader__3pt3C",load4:"Spinner_load4__de40l"}},207:function(e,t,n){e.exports=n(443)},439:function(e,t,n){},441:function(e,t,n){},443:function(e,t,n){"use strict";n.r(t);n(208),n(242);var o=n(1),a=n.n(o),r=n(194),i=n.n(r),c=n(204),l=n(72),s=n(195),u=n(196),d=n(205),p=n(197),f=n(206),b=n(49),m=n(198),h=n.n(m),v=n(59),_=n(61),g="CHANGE_POSITION",E="RESET_POSITIONS",k="RESET_COUNTER",y="INCREASE_COUNTER",O="SET_DATA";var w={defaultOrder:null,list:null,counter:0},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(_.a)({},e,{defaultOrder:t.data,list:t.data});case E:var n=Object(l.a)(e.defaultOrder);return Object(_.a)({},e,{list:n});case g:var o=Object(l.a)(e.list),a=o[t.sourcePosition],r=o[t.targetPosition];return o[t.sourcePosition]=r,o[t.targetPosition]=a,Object(_.a)({},e,{list:o});case k:return Object(_.a)({},e,{counter:0});case y:return Object(_.a)({},e,{counter:e.counter+1});default:return e}},D=Object(v.b)({books:j}),N=Object(v.c)(D),S=n(36),H=function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})},x=n(88),P=n.n(x),R=function(e){return a.a.createElement("li",{className:P.a.book,id:e.id,onMouseDown:e.onDragHandler},a.a.createElement("h2",{className:P.a.book__title},e.title),a.a.createElement("p",{className:P.a.book__author},e.authors))},A=n(200),C=n.n(A),I=Object(S.b)(function(e){return{list:e.books.list}})(function(e){var t=null;return e.list&&(t=e.list.map(function(t,n){return a.a.createElement(R,{key:t.isbn.split("-").join(""),id:t.id,title:t.name,authors:t.authors[0],pages:t.numberOfPages,onDragHandler:e.onDragHandler})})),a.a.createElement("ul",{className:C.a.books},t)}),T=n(201),L=n.n(T),W=Object(S.b)(function(e){return{counter:e.books.counter}})(function(e){return a.a.createElement("p",{className:L.a.counter},"Shifted ",a.a.createElement("strong",null,e.counter)," times")}),B=n(202),M=n.n(B),U=function(e){return a.a.createElement("button",{className:M.a.reset,onClick:e.onReset,disabled:e.isDisabled},e.children)},z=n(203),X=n.n(z),J=function(){return a.a.createElement("div",{className:X.a.loader},"Loading...")},Y=n(135),q=n.n(Y),F=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).onDragHandler=n.onDragHandler.bind(Object(b.a)(Object(b.a)(n))),n.fetchDataHandler=n.fetchDataHandler.bind(Object(b.a)(Object(b.a)(n))),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"fetchDataHandler",value:function(){h.a.get("https://anapioficeandfire.com/api/books/?page=1&pageSize=12").then(function(e){for(var t in e.data)e.data[t].id=t;var n;N.dispatch((n=e.data,{type:O,data:n}))}).catch(function(e){console.error(e)})}},{key:"componentDidMount",value:function(){this.fetchDataHandler()}},{key:"onDragHandler",value:function(e){H();var t=Object(l.a)(this.props.list);e.stopPropagation(),e.persist();var n=e.currentTarget,o=t.findIndex(function(e){return e.id===n.id?e:null}),a=null,r=null,i=null,s=e.clientX-n.getBoundingClientRect().left;function u(e){var t,o;t=e.pageX,o=e.pageY,n.style.left=t-s+"px",n.style.top=o-500+"px",n.style.position="absolute",n.style.zIndex=1e3}document.addEventListener("mousemove",u),document.addEventListener("mouseup",function e(l){document.removeEventListener("mousemove",u),n.style.visibility="hidden";var s=document.elementFromPoint(l.clientX,l.clientY);if(n.style.visibility="visible",s){(r=s.closest("li"))||(r=n),a=t.findIndex(function(e){return e.id===r.id?e:null});var d=t.filter(function(e){return e.id===r.id?e:null}),p=Object(c.a)(d,1);i=p[0],null!==a&&i&&(n.style.position="static",n.style.zIndex=0,n.style.top=0,n.style.left=0,N.dispatch({type:g,sourcePosition:o,targetPosition:a}),N.dispatch({type:y})),document.removeEventListener("mouseup",e)}})}},{key:"resetStateHandler",value:function(){N.dispatch({type:E}),N.dispatch({type:k})}},{key:"render",value:function(){return a.a.createElement("div",{className:q.a.app},a.a.createElement("h1",{className:q.a.app__title},"List of books in the world of Westeros"),a.a.createElement(W,null),a.a.createElement(U,{onReset:this.resetStateHandler,isDisabled:!this.props.list},"Reset"),this.props.list?a.a.createElement(I,{onDragHandler:this.onDragHandler}):a.a.createElement(J,null))}}]),t}(o.Component),G=Object(S.b)(function(e){return{list:e.books.list}})(F),$=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(439),n(441);i.a.render(a.a.createElement(S.a,{store:N},a.a.createElement(G,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");$?(function(e,t){fetch(e).then(function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):K(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):K(t,e)})}}()},88:function(e,t,n){e.exports={book:"Book_book__2dzfM",book__title:"Book_book__title__2Ia2O",book__author:"Book_book__author__29b23"}}},[[207,2,1]]]);
//# sourceMappingURL=main.6148f0eb.chunk.js.map